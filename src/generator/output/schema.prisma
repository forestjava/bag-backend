// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

generator typegraphql {
  provider = "typegraphql-prisma"
  output = "../src/generated"
}

datasource db {
  provider          = "postgresql"
  url               = env("DATABASE_URL")
  shadowDatabaseUrl = env("SHADOW_DATABASE_URL")
}


model Company {
  
  id  Int  @id @default(autoincrement())  
  
  name  String?    
  
  regions  Region[]  @relation("1128b17a-6b22-4c6a-8bbe-7618cf5688f1")  
  
}

model Region {
  
  id  Int  @id @default(autoincrement())  
  
  name  String?    
  
  formations  Formation[]  @relation("d29943c6-118a-4eff-a494-6f867dd3d720")  
  
  companyId  Int?    
  
  company  Company?  @relation("1128b17a-6b22-4c6a-8bbe-7618cf5688f1", fields: [companyId], references: [id])  
  
}

model Formation {
  
  id  Int  @id @default(autoincrement())  
  
  name  String?    
  
  solutions  Solution[]  @relation("0fd51c24-bfe3-4d6e-86f7-2edb50f65d3d")  
  
  zones  Zone[]  @relation("0460dd37-4ac3-450c-9eab-afb34b81ae53")  
  
  regionId  Int?    
  
  region  Region?  @relation("d29943c6-118a-4eff-a494-6f867dd3d720", fields: [regionId], references: [id])  
  
}

model Device {
  
  id  Int  @id @default(autoincrement())  
  
  alerts  Alerts[]  @relation("ef4a3dad-6c6e-4b25-92f7-0ac678ea6c04")  
  
  typeId  Int?    
  
  type  DeviceType?  @relation("35ad46da-973d-40b8-bf7c-840895ef09ad", fields: [typeId], references: [id])  
  
  uuid  String?    
  
  events  Event[]  @relation("2629d0f7-83fb-4b98-825d-9e81739a5852")  
  
  zoneId  Int?    
  
  zone  Zone?  @relation("922c4fc7-c2b7-42a5-81eb-98be4bce234a", fields: [zoneId], references: [id])  
  
}

model Solution {
  
  id  Int  @id @default(autoincrement())  
  
  name  String?    
  
  formations  Formation[]  @relation("0fd51c24-bfe3-4d6e-86f7-2edb50f65d3d")  
  
}

model Alerts {
  
  id  Int  @id @default(autoincrement())  
  
  priorityId  Int?    
  
  priority  AlertPriority?  @relation("d9fce365-62fb-4f24-ac29-5457bc23a039", fields: [priorityId], references: [id])  
  
  message  String?    
  
  deviceId  Int?    
  
  device  Device?  @relation("ef4a3dad-6c6e-4b25-92f7-0ac678ea6c04", fields: [deviceId], references: [id])  
  
}

model AlertPriority {
  
  id  Int  @id @default(autoincrement())  
  
  name  String?    
  
  alerts  Alerts[]  @relation("d9fce365-62fb-4f24-ac29-5457bc23a039")  
  
  events  Event[]  @relation("8a8d07f5-c4e7-42a9-850f-bbd01a593652")  
  
}

model Zone {
  
  id  Int  @id @default(autoincrement())  
  
  name  String?    
  
  devices  Device[]  @relation("922c4fc7-c2b7-42a5-81eb-98be4bce234a")  
  
  formationId  Int?    
  
  formation  Formation?  @relation("0460dd37-4ac3-450c-9eab-afb34b81ae53", fields: [formationId], references: [id])  
  
}

model DeviceType {
  
  id  Int  @id @default(autoincrement())  
  
  name  String?    
  
  devices  Device[]  @relation("35ad46da-973d-40b8-bf7c-840895ef09ad")  
  
}

model Event {
  
  id  Int  @id @default(autoincrement())  
  
  moment  DateTime?    
  
  deviceId  Int?    
  
  device  Device?  @relation("2629d0f7-83fb-4b98-825d-9e81739a5852", fields: [deviceId], references: [id])  
  
  message  String?    
  
  priorityId  Int?    
  
  priority  AlertPriority?  @relation("8a8d07f5-c4e7-42a9-850f-bbd01a593652", fields: [priorityId], references: [id])  
  
}
